<!DOCTYPE html>
<html>
<head>
    <title>Controller</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/styles/controller.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet">
</head>
<body>
    <h2>Controller</h2>

    <div id="loading" class="hidden">
        <img src="/styles/images/sparkle_loading.gif" alt="Loading..." />
        <p>Loading...</p>
    </div>

    <div class="maze-wrapper">
        <div id="maze"></div>
    </div>

    <div id="pollingToggleContainer">
        <label class="switch">
            <input type="checkbox" id="pollingToggle">
            <span class="slider"></span>
        </label>
        <span id="pollingStatusLabel">Polling Off</span>
    </div>

    <button id="pingBtn">Where I am</button>
    <p id="status"></p>

    <select id="playerSelect">
        <option value="player1">Player 1</option>
        <option value="player2">Player 2</option>
        <option value="player3">Player 3</option>
        <option value="player4">Player 4</option>
        <option value="player5">Player 5</option>
        <option value="player6">Player 6</option>
        <option value="player7">Player 7</option>
        <option value="player8">Player 8</option>
        <option value="player9">Player 9</option>
        <option value="player10">Player 10</option>
        <option value="player11">Player 11</option>
        <option value="player12">Player 12</option>
        <option value="player13">Player 13</option>
        <option value="player14">Player 14</option>
        <option value="player15">Player 15</option>
        <option value="player16">Player 16</option>
        <option value="player17">Player 17</option>
        <option value="player18">Player 18</option>
        <option value="player19">Player 19</option>
        <option value="player20">Player 20</option>
    </select>

    <button id="toggleModeBtn">Switch to D-Pad</button>
    <p id="controlModeLabel">Control Mode: Gemini Input</p>

    <div id="geminiInputControls">
        <input id="commandInput" placeholder="Tell Gemini where to go" /> 
        <br />
        <button onclick="submitCommand()">Send Command</button>
    </div>

    <div id="dpadControls" style="display: none">
        <div class="dpad-grid">
            <div></div>
            <button class="dpad-button" onclick="sendGeminiFromButton('move up')">?</button>
            <div></div>

            <button class="dpad-button" onclick="sendGeminiFromButton('move left')">?</button>
            <div class="dpad-center"></div>
            <button class="dpad-button" onclick="sendGeminiFromButton('move right')">?</button>

            <div></div>
            <button class="dpad-button" onclick="sendGeminiFromButton('move down')">?</button>
            <div></div>
        </div>
    </div>

    <div id="mazeTimerDisplay"></div>

    <div id="log" class="command-log">Awaiting Command</div>

    <button onclick="leave()">Main Menu</button>

    <div id="timeUpOverlay" class="hidden">
        <div class="overlay-content">
            <h2>Congrats for escaping the maze!</h2>
            <p id="ovTime">Time taken to escape the maze: 0:00</p>
            <button id="overlayResetBtn" onclick="backToMainMenu()">Main Menu</button>
        </div>
    </div>

    <div id="reconnectOverlay" class="hidden">
        <div class="overlay-content">
            <h2>Reconnecting...</h2>
            <p>
                Gemini seems to be taking a break...
                <br />
                Attempting to reconnect...
            </p>
            <img src="/styles/images/sparkle_loading.gif" alt="Reconnecting..." />
        </div>
    </div>

    <script type="module" src="/Frontend/controller.js"></script>
</body>
</html>

